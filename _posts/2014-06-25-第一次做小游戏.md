---
layout: post
---
#{{ page.title }}


###一、	成果

<a href="http://www.git-way.com/demon/footballGame/shootgame.html">足球点球小游戏页面</a>

###二、	收获
 
互联网企业讲究唯快不破,

世界杯开幕了1星期后突然要做小游戏.

开发测试上线时间只有一个星期.上淘宝等电商平台看看，

当时还都没有啥应景的小游戏推出（一星期后淘宝客户端出了个打地鼠抢红包），

游戏的灵感也是我中午吃饭回来顶着太阳和轶卓讨论出来的，

想到足球游戏比较经典的射门类型，结合现有摇一摇的功能，

起初是设想随着用户摇一摇后能量槽蓄力，蓄满就可以射门，

后来和小白讨论改为点击蓄力射门，

时间很紧.在完全没有ui的情况下，在网上随便下

群里的人也觉得这个属性很好.

上周五出个二期优化：主要解决球射出动画改为用css animation 去定义keyframe 动画帧,

利用translateY 替代了原来的top属性的过度动画。

压缩的音频和图片

###三、 坑

第一次应用动画,不知道过渡和变形同时在某些安卓机里会冲突,并且写法也有严格要求,

尽量标准的写keyframe ,安卓低版本上0%-100%支持,from to不太支持.

####1: 音频预加载

安卓支持audio标签的预加载,没啥问题

可IOS就不行了,第一次优化就针对这个,需要利用web audio api解决

读mp3转的base64然后转成音频流

####2：z-index

当游戏有多个元素与背景时,加上弹层,一定要设好层的高度

####3：压缩,预加载

游戏首屏时加载所有的img和音乐资源,利用onload去调用进度条重绘方法,

判断全部加载时,给游戏开始绑上开始游戏的方法.

图片和音乐在保证体验的同时要尽量的压缩.

否则吃用户的3g流量,心里很过意不去
